## í™˜ê²½

| ì¢…ë¥˜ | ê¸°ìˆ ìŠ¤íƒ       | ë²„ì „                        |
| ---- | -------------- | --------------------------- |
| JVM  | Java           | 11.0.20                     |
| WAS  | Spring Boot    | 2.7.15                      |
| IDE  | IntelliJ       | 2023.1.3 (Ultimate Edition) |
|      | Docker Desktop | 4.22.0                      |
|      | Node.js        | 18.16.1                     |
|      | vs code        | 1.81.1                      |

## ë°±ì—”ë“œ(Tally) ì‹¤í–‰í•˜ê¸°

1. `git clone https://lab.ssafy.com/s09-fintech-finance-sub2/S09P22A108.git` í”„ë¡œì íŠ¸ ë‚´ì˜ `backend` ë””ë ‰í† ë¦¬ì— ì ‘ì†
2. backend ë””ë ‰í† ë¦¬ ë‚´ì— `/tallydocker/docker-compose.yml` ìƒì„±
3. backend ë””ë ‰í† ë¦¬ rootì— `.env` ìƒì„±
4. `docker-compose.yml` ë‚´ì˜ ì„œë¹„ìŠ¤ ì‹¤í–‰
5. ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
6. `http://localhost:8080` ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸

## í™˜ê²½ ë³€ìˆ˜ ë° í”„ë¡œí¼í‹° íŒŒì¼

`docker-compose.yml`

```java
version: '3'
services:
  mariadb:
    image: mariadb:11.0.2
    ports:
      - "3307:3306"
    environment:
      MARIADB_DATABASE: tally
      MARIADB_USER: sss
      MARIADB_PASSWORD: tallysssA108
      MARIADB_ROOT_PASSWORD: test
    volumes:
      - "./mariadb/conf.d:/etc/mysql/conf.d"
      - "./mariadb/data:/var/lib/mysql"
    container_name: mariadb-tally

  redis:
    image: redis:latest
    ports:
      - "6380:6379"
    environment:
      - REDIS_PASSWORD=banksssA108
    container_name: redis-tally

  mongodb:
    image: mongo
    ports:
      - "27017:27017"
    volumes:
      - "./mongodb/data:/data/db"
    container_name: mongodb-tally
```

`.env`

```java
DB_HOST=localhost
DB_PORT=3307
DB_NAME=tally
DB_USER=sss
DB_PASSWORD=tallysssA108

REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=tallysssA108

FCM_KEY_PATH=firebase/tally-ec2a7-firebase-adminsdk-5iget-2e7be4b4a6.json
FCM_KEY_SCOPE=https://www.googleapis.com/auth/cloud-platform

MONGO_USER=sss
MONGO_PASSWORD=tallysssA108
MONGO_HOST=localhost
MONGO_PORT=27017
MONGO_DB=tally

TOKEN_SECRET=${ì§€ì •í•  token ë¹„ë°€ë²ˆí˜¸}

COUNTRY_SERVICE_KEY=lQexMZMXDyFSmMCHE%2BbQj%2Fcm7uDGA%2Fn0AuNXPx0rfTPz%2BDOj%2FRX8U1Ay50ntvW2CJgOgOpMvoBYNohwsp%2BQMsw%3D%3D

AWS_ACCESS_KEY=AKIASUML2QGYW3YCZ5M5
AWS_SECRET_KEY=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

NAVER_CLIENT_ID=72_pzxA28ZArtTUiswrv
NAVER_CLIENT_SECRET=OJwNOv3kXJ
```

## ë°±ì—”ë“œ(SSS-bank) ì‹¤í–‰í•˜ê¸°

1. `git clone https://lab.ssafy.com/s09-fintech-finance-sub2/S09P22A108.git` í”„ë¡œì íŠ¸ ë‚´ì˜ `SSS-bank-Backend` ë””ë ‰í† ë¦¬ì— ì ‘ì†
2. backend ë””ë ‰í† ë¦¬ ë‚´ì— `/sssdocker/docker-compose.yml` ìƒì„±
3. backend ë””ë ‰í† ë¦¬ rootì— `.env` ìƒì„±
4. `docker-compose.yml` ë‚´ì˜ ì„œë¹„ìŠ¤ ì‹¤í–‰
5. ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
6. `http://localhost:8080` ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸

## í™˜ê²½ ë³€ìˆ˜ ë° í”„ë¡œí¼í‹° íŒŒì¼

`docker-compose.yml`

```java
version: '3'
services:
  mariadb:
    image: mariadb:11.0.2
    ports:
      - "3306:3306"
    environment:
      MARIADB_DATABASE: bank
      MARIADB_USER: sss
      MARIADB_PASSWORD: banksssA108
      MARIADB_ROOT_PASSWORD: test
    volumes:
      - "./mariadb/conf.d:/etc/mysql/conf.d"
      - "./mariadb/data:/var/lib/mysql"
    container_name: mariadb-bank

  redis:
    image: redis:latest
    ports:
      - "6379:6379"
    environment:
      - REDIS_PASSWORD=banksssA108
    container_name: redis-bank
```

`.env`

```java
DB_HOST=localhost
DB_PORT=3306
DB_NAME=bank
DB_USER=sss
DB_PASSWORD=banksssA108

KAKAO_CLIENT_ID=${ë°œê¸‰ë°›ì€ kakao client id}
KAKAO_CLIENT_SECRET=${ë°œê¸‰ë°›ì€ kakao Javascript Key}

TOKEN_SECRET=${ì§€ì •í•  token secret key}

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=banksssA108

COUNTRY_SERVICE_KEY=lQexMZMXDyFSmMCHE%2BbQj%2Fcm7uDGA%2Fn0AuNXPx0rfTPz%2BDOj%2FRX8U1Ay50ntvW2CJgOgOpMvoBYNohwsp%2BQMsw%3D%3D
```

## í”„ë¡ íŠ¸ì—”ë“œ(Tally) ì‹¤í–‰í•˜ê¸°

1. `git clone https://lab.ssafy.com/s09-fintech-finance-sub2/S09P22A108.git` í›„ í”„ë¡œì íŠ¸ ê²½ë¡œ ë‚´ì˜ `frontend` ë””ë ‰í† ë¦¬ì— ì ‘ì†
2. `frontend` ë””ë ‰í† ë¦¬ ê²½ë¡œ ë‚´ì—ì„œ `npm install` ì‹¤í–‰
3. `frontend` ë””ë ‰í† ë¦¬ ê²½ë¡œ rootì— `.env` ìƒì„±
4. `npm run start` ëª…ë ¹ì–´ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
5. `a`ë¥¼ ì…ë ¥í•˜ì—¬ android ì• ë®¬ë ˆì´í„° ì‹¤í–‰
6. ì• ë®¬ë ˆì´í„°ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸

## í™˜ê²½ ë³€ìˆ˜ ë° í”„ë¡œí¼í‹° íŒŒì¼

`.env`

```java
KAKAO_APP_KEY=kakao${ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ì„ ìœ„í•´ ë°œê¸‰ë°›ì€ ë„¤ì´í‹°ë¸Œ í‚¤}
APP_KEY=${ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ì„ ìœ„í•´ ë°œê¸‰ë°›ì€ ë„¤ì´í‹°ë¸Œ í‚¤}
BACK_ADDR="${tally ë°±ì—”ë“œ ì£¼ì†Œ}/"
WEATHER_API_KEY=${Accu Weather APIì—ì„œ ë°œê¸‰ë°›ì€ API key}
EX_KEY=${í•œêµ­ ìˆ˜ì¶œì… ì€í–‰ì—ì„œ ë°œê¸‰ ë°›ì€ API í‚¤}
FIREBASE_API_KEY=${firebaseì— ë“±ë¡í•œ ì•±ì˜ API í‚¤}
OCR_KEY=${OCR ë¼ì´ë¸ŒëŸ¬ë¦¬ API í‚¤}
```

## í”„ë¡ íŠ¸ì—”ë“œ(SSS-bank) ì‹¤í–‰í•˜ê¸°

1. `git clone https://lab.ssafy.com/s09-fintech-finance-sub2/S09P22A108.git`í´ë¡  í›„ í”„ë¡œì íŠ¸ ê²½ë¡œ ë‚´ì˜ `SSS-bank-Frontend` ë””ë ‰í† ë¦¬ì— ì ‘ì†
2. `SSS-bank-Frontend` ë””ë ‰í† ë¦¬ ê²½ë¡œ ë‚´ì—ì„œ `npm install` ì‹¤í–‰
3. `SSS-bank-Frontend` ë””ë ‰í† ë¦¬ rootì— `.env` ìƒì„±
4. `npm run start` ëª…ë ¹ì–´ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
5. `http://localhost:3000` ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸

## í™˜ê²½ ë³€ìˆ˜ ë° í”„ë¡œí¼í‹° íŒŒì¼

`.env`

```java
REACT_APP_KAKAO_CLIENT_ID=${ë°œê¸‰ë°›ì€ kakao client id}
REACT_APP_KAKAO_REDIRECT_URI=${í”„ë¡ íŠ¸ì—”ë“œ ì£¼ì†Œ}/oauth/kakao/callback
REACT_APP_BACK_ADDR="${ë°±ì—”ë“œ ì£¼ì†Œ}/"
```

# ğŸ’« ë°°í¬ ë°©ë²•

## í”„ë¡ íŠ¸ì—”ë“œ(SSS-bank) ë°°í¬ ì„¤ì •

### 1. Dockerfile ì‘ì„±

`/var/lib/jenkins/workspace/{ì•„ì´í…œ ì´ë¦„}/SSS-bank-Frontend/Dockerfile`

```java
FROM node:18.16.1

WORKDIR /app

COPY package.json .
RUN npm install
COPY . .

EXPOSE 3000

CMD ["npm", "run", "build"]
```

### 2. .env ì‘ì„±

`/var/lib/jenkins/workspace/{ì•„ì´í…œ ì´ë¦„}/SSS-bank-Frontend/.env`

```java
REACT_APP_KAKAO_CLIENT_ID=${ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ í´ë¼ì´ì–¸íŠ¸ ì•„ì´ë””}
REACT_APP_KAKAO_REDIRECT_URI=${í”„ë¡ íŠ¸ì—”ë“œ ì£¼ì†Œ}/oauth/kakao/callback
REACT_APP_BACK_ADDR="${ë°±ì—”ë“œ ì£¼ì†Œ}/"
```

### 1. Jenkins í™˜ê²½ ì„¤ì •

1. Jenkins - ê´€ë¦¬ - Tools - Node.js 18.16.1 ë²„ì „ ì„¤ì¹˜
2. Jenkins - Plugins - Gitlab Plugin ì„¤ì¹˜

### 2. ìë™ ë¹Œë“œ ì„¤ì •í•˜ê¸°

1. í”„ë¡œì íŠ¸ ì•„ì´í…œ ìƒì„± (ë¹ˆ í”„ë¡œì íŠ¸)
2. ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ - Git ì„ íƒ
3. Repository URLì— Gitlab URL ì…ë ¥ í›„ Credentials ì¸ì¦ ì§„í–‰
4. Branches to build - Branch Specifier (blank for 'any') - `/develop` ìœ¼ë¡œ ì§€ì • (ë¹Œë“œ í•  ë¸Œëœì¹˜ë¡œ ì§€ì •)
5. ë¹Œë“œ ìœ ë°œ - Build when a change is pushed to GitLab ì„ íƒ
6. Enabled GitLab triggersì˜ Push Events/Opened Merge Request Events/Approved Merge Requests (EE-only)/Comments ì„ íƒ
7. ê³ ê¸‰ - Filter branches by name `develop`(ë¹Œë“œ í•  ë¸Œëœì¹˜) ì…ë ¥
8. Secret Token ìƒì„± í›„ ì €ì¥
9. Gitlab Repository ì ‘ì† í›„ Setting - Webhooks - URLê³¼ Secret Token, ë¸Œëœì¹˜ ëª… ì…ë ¥ í›„ ì €ì¥
10. ë¹Œë“œí™˜ê²½ - Provide Node & npm bin/ folder to PATH ì„ íƒ í›„ ì„¤ì¹˜í•œ NodeJS ì„ íƒ
11. Build Steps - Execute Shellì— ëª…ë ¹ì–´ ì…ë ¥

```java
docker rm react-bank
docker rmi react-bank
cd SSS-bank-Frontend
docker build -t react-bank .
docker run --name react-bank -d -p 3000:3000 -v /var/lib/jenkins/workspace/react-bank/SSS-bank-Frontend/build:/app/build react-bank
```

## í”„ë¡ íŠ¸ì—”ë“œ(Tally) ë°°í¬ ì„¤ì •

<aside>
ğŸ’¡ ì•ˆë“œë¡œì´ë“œ ë²„ì „ìš© ì…ë‹ˆë‹¤.

</aside>

### 1. ì•ˆë“œë¡œì´ë“œìš© ì„œëª…í‚¤ë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤

```jsx
keytool -genkey -v -keystore [key-name].keystore -alias [key alias] -keyalg RSA -keysize 2048 -validity 10000
```

### 2. ë°œê¸‰í•œ í‚¤ë¥¼ í”„ë¡œì íŠ¸ëª…/android/app í´ë”ì— ë„£ìŠµë‹ˆë‹¤.

### 3. í‚¤ ì„¤ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤

android/gradle.properties íŒŒì¼ ì•„ë˜ ì½”ë“œ ì¶”ê°€

```jsx
MYAPP_RELEASE_STORE_FILE=[key-name]
MYAPP_RELEASE_KEY_ALIAS=[key alias]
MYAPP_RELEASE_STORE_PASSWORD=*****
MYAPP_RELEASE_KEY_PASSWORD=*****
```

android/app/build.gradle íŒŒì¼ ì•„ë˜ì— ì½”ë“œ ì¶”ê°€

```jsx
...
android {
    ...
    defaultConfig { ... }
    signingConfigs {
        release {
            if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {
                storeFile file(MYAPP_RELEASE_STORE_FILE)
                storePassword MYAPP_RELEASE_STORE_PASSWORD
                keyAlias MYAPP_RELEASE_KEY_ALIAS
                keyPassword MYAPP_RELEASE_KEY_PASSWORD
            }
        }
    }
    buildTypes {
        release {
            ...
            signingConfig signingConfigs.release
        }
    }
}
...
```

### 4. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ë¹Œë“œ í•©ë‹ˆë‹¤.

```jsx
./gradlew assembleRelease
```

5. android/app/build/outputs/apk/release ê²½ë¡œì—ì„œ apk íŒŒì¼ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## ë°±ì—”ë“œ ë°°í¬(SSS-bank) ì„¤ì •

### 1. Dockerfile ì‘ì„±

`/var/lib/jenkins/workspace/{ì•„ì´í…œ ì´ë¦„}/SSS-bank-Backend/Dockerfile`

```java
FROM openjdk:11

ADD ./build/libs/bank-0.0.1-SNAPSHOT.jar app.jar

ENTRYPOINT ["java", "-jar", "-Dspring.profiles.active=${ì„¤ì •í•  profile ì •ë³´}", "-Duser.timezone=Asia/Seoul", "./app.jar"]
```

### 1. Jenkins í™˜ê²½ ì„¤ì •

1. Jenkins - ê´€ë¦¬ - Tools - Gradle ì„¤ì¹˜ (gradle-sss-bank)
2. Jenkins - Plugins - Gitlab Plugin ì„¤ì¹˜

### 2. ìë™ ë¹Œë“œ ì„¤ì •í•˜ê¸°

1. í”„ë¡œì íŠ¸ ì•„ì´í…œ ìƒì„± (ë¹ˆ í”„ë¡œì íŠ¸)
2. ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ - Git ì„ íƒ
3. Repository URLì— Gitlab URL ì…ë ¥ í›„ Credentials ì¸ì¦ ì§„í–‰
4. Branches to build - Branch Specifier (blank for 'any') - `/develop` ë¡œ ì§€ì • (ë¹Œë“œ í•  ë¸Œëœì¹˜ë¡œ ì§€ì •)
5. ë¹Œë“œ ìœ ë°œ - Build when a change is pushed to GitLab ì„ íƒ
6. Enabled GitLab triggersì˜ Push Events/Opened Merge Request Events/Approved Merge Requests (EE-only)/Comments ì„ íƒ
7. ê³ ê¸‰ - Filter branches by name `develop`(ë¹Œë“œ í•  ë¸Œëœì¹˜) ì…ë ¥
8. Secret Token ìƒì„± í›„ ì €ì¥
9. Gitlab Repository ì ‘ì† í›„ Setting - Webhooks - URLê³¼ Secret Token, ë¸Œëœì¹˜ ëª… ì…ë ¥ í›„ ì €ì¥
10. Build Steps - Execute Shellì— ëª…ë ¹ì–´ ì…ë ¥

```java
docker stop spring-bank
docker rm spring-bank
docker rmi spring-bank
cd SSS-bank-Backend
/var/lib/jenkins/tools/hudson.plugins.gradle.GradleInstallation/gradle-sss-bank/bin/gradle clean bootJar
docker build /var/lib/jenkins/workspace/spring-bank/SSS-bank-Backend/. -t spring-bank
docker run --network bank -p 8011:8011 --name spring-bank -d spring-bank
```

### 3. yml ì„¤ì •

ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•˜ê¸°

```java
server:
    port: 8081
```

## ë°±ì—”ë“œ ë°°í¬(Tally) ì„¤ì •

### 1. Dockerfile ì‘ì„±

`/var/lib/jenkins/workspace/{ì•„ì´í…œ ì´ë¦„}/backend/Dockerfile`

```java
FROM openjdk:11

ADD ./build/libs/tally-0.0.1-SNAPSHOT.jar app.jar

ENTRYPOINT ["java", "-jar", "-Dspring.profiles.active=${ì„¤ì •í•  profile ì •ë³´}", "-Duser.timezone=Asia/Seoul", "./app.jar"]
```

### 1. Jenkins í™˜ê²½ ì„¤ì •

1. Jenkins - ê´€ë¦¬ - Tools - Gradle ì„¤ì¹˜ (gradle-tally)
2. Jenkins - Plugins - Gitlab Plugin ì„¤ì¹˜

### 2. ìë™ ë¹Œë“œ ì„¤ì •í•˜ê¸°

1. bank ìë™ ë¹Œë“œ ì„¤ì •ê³¼ ë™ì¼í•¨
2. Build Steps - Execute Shellì— ëª…ë ¹ì–´ ì…ë ¥

```java
docker stop spring-tally
docker rm spring-tally
docker rmi spring-tally
cd backend
/var/lib/jenkins/tools/hudson.plugins.gradle.GradleInstallation/gradle-tally/bin/gradle clean bootJar
docker build /var/lib/jenkins/workspace/spring-tally/backend/. -t spring-tally
docker run --network tally -p 8010:8010 --name spring-tally -d spring-tally
```

## nginx ì„¤ì •

### 1. nginx ì„¤ì¹˜

```java
sudo apt update
sudo apt install nginx
```

### 2. ì„¤ì • íŒŒì¼ ìƒì„±

```java
cd /etc/nginx/sites-available
vim default
```

default íŒŒì¼ì— ì•„ë˜ ë‚´ìš©ì„ ì‘ì„±í•œë‹¤

```java
server {
        server_name j9a108.p.ssafy.io;

        location / {
                root /var/lib/jenkins/workspace/${ì•„ì´í…œì´ë¦„}/SSS-bank-Frontend/build;
                index index.html index.htm;
                try_files $uri $uri/ /index.html;
        }

        location /wasApi {
                rewrite ^/wasApi(.*)$ $1 break;
                proxy_pass http://j9a108.p.ssafy.io:8011;
                proxy_http_version 1.1;
                proxy_set_header Connection "";
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
        }

        location /api {
                rewrite ^/api(.*)$ $1 break;
                proxy_pass http://j9a108.p.ssafy.io:8010;
                proxy_http_version 1.1;
                proxy_set_header Connection "";
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
        }
}
```

### 4. SSL ì¸ì¦ì„œ ë°œê¸‰

certbotì„ ì„¤ì¹˜í•œë‹¤

```java
sudo apt-get update
sudo apt-get upgrade
sudo add-get-repository ppa:certbot/certbot
sudo apt-get update
sudo apt-get install python-certbot-nginx
sudo certbot --nginx -d ${ë„ë©”ì¸ ì£¼ì†Œ} -d ${ë„ë©”ì¸ ì£¼ì†Œ}
```

nginxë¥¼ ì¬ì‹œì‘ í•œë‹¤

```java
sudo nginx -t
sudo systemctl restart nginx
```

`/etc/nginx/sites-available/default` íŒŒì¼ì— certbotì´ ì¶”ê°€í•œ 443 ì •ë³´ê°€ ìˆë‹¤ë©´ ì„±ê³µ!

```java
listen [::]:443 ssl ipv6only=on; # managed by Certbot
listen 443 ssl; # managed by Certbot
ssl_certificate /etc/letsencrypt/live/j9a108.p.ssafy.io/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/j9a108.p.ssafy.io/privkey.pem; # managed by Certbot
include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

server {
    if ($host = j9a108.p.ssafy.io) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

        listen 80 default_server;
        listen [::]:80 default_server;
        server_name j9a108.p.ssafy.io;
    return 404; # managed by Certbot

}
```

# âš ï¸ì‹¤í–‰, ë°°í¬ ì‹œ ì£¼ì˜í•  ì 

1. SSS-bankê°€ ë°°í¬ëœ í›„, tallyë¥¼ ë°°í¬í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
2. SSS-bankì˜ url ì£¼ì†Œê°€ ë³€í–ˆë‹¤ë©´ backend í´ë” ë‚´ Feign clientì˜ ì£¼ì†Œê°€ `https://j9a108.p.ssafy.io/wasApi` ë¡œ ì§€ì •ëœ ëª¨ë“  ê³³ì„ í•´ë‹¹ ì£¼ì†Œë¡œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. (ì‹¤í–‰ í•˜ì˜€ì„ ë•Œì—ë„ ë™ì¼í•©ë‹ˆë‹¤.)
3. ì§€ì—­ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ apië¥¼ ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤.
4. (sss-bank) `GET {bank back ì£¼ì†Œ}/country` ë‚˜ë¼ ì •ë³´ ë°˜í™˜ ì‹œ, ì„±ê³µ
5. (tally) `POST {tally back ì£¼ì†Œ}/destination/state` OK ì‘ë‹µ ì‹œ, ì„±ê³µ
6. (tally) `POST {tally back ì£¼ì†Œ}/destination/city` OK ì‘ë‹µ ì‹œ, ì„±ê³µ
7. (tally) `GET {tally back ì£¼ì†Œ}/destination/state` OK ì‘ë‹µ ì‹œ, ì„±ê³µ
8. (tally) `GET {tally back ì£¼ì†Œ}/country` ë‚˜ë¼ ì •ë³´ ë°˜í™˜ ì‹œ, ì„±ê³µ
9. ì•„ë˜ì˜ ì¿¼ë¦¬ë¬¸ì„ ë¡œì»¬ ë˜ëŠ” ì„œë²„ mariadbì— ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
10. sss-bankì— í•„ìš”í•œ ì¿¼ë¦¬ë¬¸

    ```sql
    use bank;

    insert into bank (bank_name,bank_code) values
       ("ê²½ë‚¨ì€í–‰", '039'),
       ("ê´‘ì£¼ì€í–‰", '034'),
       ("ë‹¨ìœ„ë†í˜‘", '012'),
       ("ë¶€ì‚°ì€í–‰", '032'),
       ("ìƒˆë§ˆì„ê¸ˆê³ ", '045'),
       ("ì‹ í•œì€í–‰", '088'),
       ("ì”¨í‹°ì€í–‰", '027'),
       ("ìš°ë¦¬ì€í–‰", '020'),
       ("ì „ë¶ì€í–‰", '037'),
       ("ì œì£¼ì€í–‰", '035'),
       ("ì¹´ì¹´ì˜¤ë±…í¬", '090'),
       ("ì¼€ì´ë±…í¬", '089'),
       ("í† ìŠ¤ë±…í¬", '092'),
       ("í•˜ë‚˜ì€í–‰", '081'),
       ("ê¸°ì—…ì€í–‰", '003'),
       ("êµ­ë¯¼ì€í–‰", '004'),
       ("ëŒ€êµ¬ì€í–‰", '031'),
       ("ì‚°ì—…ì€í–‰", '002'),
       ("ë†í˜‘ì€í–‰", '011'),
       ("SCì œì¼ì€í–‰", '023'),
       ("ìˆ˜í˜‘ì€í–‰", '007');
    ```

11. tallyì— í•„ìš”í•œ ì¿¼ë¦¬ë¬¸

    ```sql
    use tally;

    insert into bank (bank_name,bank_code) values
       ("ê²½ë‚¨ì€í–‰", '039'),
       ("ê´‘ì£¼ì€í–‰", '034'),
       ("ë‹¨ìœ„ë†í˜‘", '012'),
       ("ë¶€ì‚°ì€í–‰", '032'),
       ("ìƒˆë§ˆì„ê¸ˆê³ ", '045'),
       ("ì‹ í•œì€í–‰", '088'),
       ("ì”¨í‹°ì€í–‰", '027'),
       ("ìš°ë¦¬ì€í–‰", '020'),
       ("ì „ë¶ì€í–‰", '037'),
       ("ì œì£¼ì€í–‰", '035'),
       ("ì¹´ì¹´ì˜¤ë±…í¬", '090'),
       ("ì¼€ì´ë±…í¬", '089'),
       ("í† ìŠ¤ë±…í¬", '092'),
       ("í•˜ë‚˜ì€í–‰", '081'),
       ("ê¸°ì—…ì€í–‰", '003'),
       ("êµ­ë¯¼ì€í–‰", '004'),
       ("ëŒ€êµ¬ì€í–‰", '031'),
       ("ì‚°ì—…ì€í–‰", '002'),
       ("ë†í˜‘ì€í–‰", '011'),
       ("SCì œì¼ì€í–‰", '023'),
       ("ìˆ˜í˜‘ì€í–‰", '007');

    -- ì‹œ ì¿¼ë¦¬ë¬¸
    update state set english_name='Seoul'
    where state_id=1;
    update state set english_name='Busan'
    where state_id=2;
    update state set english_name='Daegu'
    where state_id=3;
    update state set english_name='Incheon'
    where state_id=4;
    update state set english_name='Gwangju'
    where state_id=5;
    update state set english_name='Daejeon'
    where state_id=6;
    update state set english_name='Ulsan'
    where state_id=7;
    update state set english_name='Jeju'
    where state_id=15;

    -- ë„ì‹œ ì¿¼ë¦¬
    delete from city where city_name="ë³´ë ¹ì‹œ";
    delete from city where city_name="ìˆœì²œì‹œ";

    update city set english_name='Suwon'
    where city_name="ìˆ˜ì›ì‹œ";
    update city set english_name='Seongnam'
    where city_name="ì„±ë‚¨ì‹œ";
    update city set english_name='Uijeongbu'
    where city_name="ì˜ì •ë¶€ì‹œ";
    update city set english_name='Chungju'
    where city_name="ì²­ì£¼ì‹œ";
    update city set english_name='Cheongju'
    where city_name="ì¶©ì£¼ì‹œ";
    update city set english_name='Jecheon'
    where city_name="ì œì²œì‹œ";
    update city set english_name='Cheonan'
    where city_name="ì²œì•ˆì‹œ";
    update city set english_name='Gongju'
    where city_name="ê³µì£¼ì‹œ";
    update city set english_name='Jeonju'
    where city_name="ì „ì£¼ì‹œ";
    update city set english_name='Gunsan'
    where city_name="êµ°ì‚°ì‹œ";
    update city set english_name='Iksan'
    where city_name="ìµì‚°ì‹œ";
    update city set english_name='Mokpo'
    where city_name="ëª©í¬ì‹œ";
    update city set english_name='Yeosu'
    where city_name="ì—¬ìˆ˜ì‹œ";
    update city set english_name='Pohang'
    where city_name="í¬í•­ì‹œ";
    update city set english_name='Gyeongju'
    where city_name="ê²½ì£¼ì‹œ";
    update city set english_name='Gimcheon'
    where city_name="ê¹€ì²œì‹œ";
    update city set english_name='Changwon'
    where city_name="ì°½ì›ì‹œ";
    update city set english_name='Jinju'
    where city_name="ì§„ì£¼ì‹œ";
    update city set english_name='Tongyeong'
    where city_name="í†µì˜ì‹œ";
    update city set english_name='Chuncheon'
    where city_name="ì¶˜ì²œì‹œ";
    update city set english_name='Wonju'
    where city_name="ì›ì£¼ì‹œ";
    update city set english_name='Gangneung'
    where city_name="ê°•ë¦‰ì‹œ";

    -- ì¹´í…Œê³ ë¦¬ ì¿¼ë¦¬ë¬¸
    insert into category values (1, "ìˆ™ì†Œ"),
                                (2, "í•­ê³µ"),
                                (3, "êµí†µ"),
                                (4, "ê´€ê´‘"),
                                (5, "ì‹ì‚¬"),
                                (6, "ì‡¼í•‘"),
                                (7, "ê¸°íƒ€");

    -- payment unit ì¿¼ë¦¬ë¬¸
    insert into payment_unit values
                                 (1, "ë¯¸êµ­", "USD(ë¯¸êµ­ ë‹¬ëŸ¬)"),
                                 (2, "ì¤‘êµ­", "CNY(ìœ„ì•ˆ)"),
                                 (3, "ì¼ë³¸", "JPY(ì—”)"),
                                 (4, "ìœ ëŸ½", "EUR(ìœ ë¡œ)"),
                                 (5, "ìŠ¤ìœ„ìŠ¤", "CHF(í”„ë‘)"),
                                 (6, "ì˜êµ­", "GBP(íŒŒìš´ë“œìŠ¤í„¸ë§)"),
                                 (7, "ë² íŠ¸ë‚¨", "VND(ë‘¥)"),
                                 (8, "ëŒ€í•œë¯¼êµ­", "KRW(ì›)");

    -- íšŒí™” ì •ë³´ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ì¿¼ë¦¬ë¬¸

    UPDATE tally.country
    SET language = 'fr'
    WHERE country_name IN ('í”„ë‘ìŠ¤', 'ë²¨ê¸°ì—', 'ë£©ì…ˆë¶€ë¥´í¬');

    UPDATE tally.country
    SET language = 'it'
    WHERE country_name IN ('ì´íƒˆë¦¬ì•„', 'ì‚°ë§ˆë¦¬ë…¸');

    UPDATE tally.country
    SET language = 'ru'
    WHERE country_name IN ('ëŸ¬ì‹œì•„', 'ë²¨ë¼ë£¨ìŠ¤', 'ì¹´ìíìŠ¤íƒ„');

    UPDATE tally.country
    SET language = 'de'
    WHERE country_name IN ('ë…ì¼', 'ì˜¤ìŠ¤íŠ¸ë¦¬ì•„', 'ìŠ¤ìœ„ìŠ¤', 'ë¦¬íˆí…ìŠˆíƒ€ì¸', 'ë£©ì…ˆë¶€ë¥´í¬');

    UPDATE tally.country
    SET language = 'th'
    WHERE country_name IN ('íƒœêµ­', 'ìº„ë³´ë””ì•„', 'ë¯¸ì–€ë§ˆ');

    UPDATE tally.country
    SET language = 'id'
    WHERE country_name IN ('ì¸ë„ë„¤ì‹œì•„', 'ë™í‹°ëª¨ë¥´', 'ë§ë ˆì´ì‹œì•„', 'ë„¤ëœë€ë“œ');

    UPDATE tally.country
    SET language = 'vi'
    WHERE country_name IN ('ë² íŠ¸ë‚¨');

    UPDATE tally.country
    SET language = 'zh-TW'
    WHERE country_name IN ('ëŒ€ë§Œ', 'í™ì½©', 'ë§ˆì¹´ì˜¤');

    UPDATE tally.country
    SET language = 'zh-CN'
    WHERE country_name IN ('ì¤‘êµ­', 'ì‹±ê°€í¬ë¥´');

    UPDATE tally.country
    SET language = 'ja'
    WHERE country_name IN ('ì¼ë³¸');

    UPDATE tally.country
    SET language = 'es'
    WHERE country_name IN ('ìŠ¤í˜ì¸', 'ë©•ì‹œì½”', 'ë² ë„¤ìˆ˜ì—˜ë¼ë³¼ë¦¬ë°”ë¥´', 'ì½œë¡¬ë¹„ì•„', 'ì—ì½°ë„ë¥´', 'ì¹ ë ˆ', 'ìš°ë£¨ê³¼ì´', 'ì•„ë¥´í—¨í‹°ë‚˜', 'í˜ë£¨', 'ê³¼í…Œë§ë¼', 'ë„ë¯¸ë‹ˆì¹´ê³µí™”êµ­', 'ë„ë¯¸ë‹ˆì¹´ì—°ë°©', 'ë³¼ë¦¬ë¹„ì•„', 'ì˜¨ë‘ë¼ìŠ¤', 'ì—˜ì‚´ë°”ë„ë¥´', 'ë‹ˆì¹´ë¼ê³¼', 'íŒŒë¼ê³¼ì´', 'íŒŒë‚˜ë§ˆ', 'ì½”ìŠ¤íƒ€ë¦¬ì¹´', 'ê¸°ë‹ˆë¹„ì‚¬ìš°');

    UPDATE tally.country
    SET language = 'en'
    WHERE country_name IN ('ë¯¸í•©ì¤‘êµ­', 'ë‰´ì§ˆëœë“œ', 'ì˜êµ­', 'ìºë‚˜ë‹¤', 'ê°€ë‚˜');

    -- ì£¼ìš” êµ­ê°€ë“¤ ì‹œì°¨ ì •ë³´

    UPDATE tally.country
    SET time_difference = 3
    WHERE country_name IN ('ë‰´ì§ˆëœë“œ');

    UPDATE tally.country
    SET time_difference = -1
    WHERE country_name IN ('ì¤‘êµ­', 'ëŒ€ë§Œ', 'ë§ˆì¹´ì˜¤', 'ë§ë ˆì´ì‹œì•„', 'ì‹±ê°€í¬ë¥´', 'í•„ë¦¬í•€', 'í™ì½©');

    UPDATE tally.country
    SET time_difference = -2
    WHERE country_name IN ('ë² íŠ¸ë‚¨', 'ìº„ë³´ë””ì•„', 'íƒœêµ­', 'ì¸ë„ë„¤ì‹œì•„');

    UPDATE tally.country
    SET time_difference = -3
    WHERE country_name IN ('ë°©ê¸€ë¼ë°ì‹œ');

    UPDATE tally.country
    SET time_difference = -3.5
    WHERE country_name IN ('ì¸ë„');

    UPDATE tally.country
    SET time_difference = -4
    WHERE country_name IN ('ëª°ë””ë¸Œ');

    UPDATE tally.country
    SET time_difference = -5
    WHERE country_name IN ('ê·¸ë¦¬ìŠ¤');

    UPDATE tally.country
    SET time_difference = -6
    WHERE country_name IN ('ëŸ¬ì‹œì•„', 'ì‚¬ìš°ë””ì•„ë¼ë¹„ì•„', 'ì¹´íƒ€ë¥´');

    UPDATE tally.country
    SET time_difference = -7
    WHERE country_name IN ('ë‚¨ì•„í”„ë¦¬ì¹´ê³µí™”êµ­', 'ë„¤ëœë€ë“œ', 'ë…¸ë¥´ì›¨ì´', 'ë´ë§ˆí¬', 'ë…ì¼', 'ë£©ì…ˆë¶€ë¥´í¬', 'ìŠ¤ì›¨ë´', 'ìŠ¤ìœ„ìŠ¤', 'ìŠ¤í˜ì¸', 'ë²¨ê¸°ì—', 'ì˜¤ìŠ¤íŠ¸ë¦¬ì•„', 'ì´ì§‘íŠ¸', 'ì´íƒˆë¦¬ì•„', 'í•€ë€ë“œ');

    UPDATE tally.country
    SET time_difference = -8
    WHERE country_name IN ('í—ê°€ë¦¬', 'í´ë€ë“œ', 'í”„ë‘ìŠ¤', 'í¬ë¡œì•„í‹°ì•„', 'ì•„ì¼ëœë“œ', 'ì˜êµ­');

    UPDATE tally.country
    SET time_difference = -9
    WHERE country_name IN ('ëª¨ë¡œì½”', 'ì•„ì´ìŠ¬ë€ë“œ', 'í¬ë¥´íˆ¬ê°ˆ');

    UPDATE tally.country
    SET time_difference = -12
    WHERE country_name IN ('ìš°ë£¨ê³¼ì´', 'ì•„ë¥´í—¨í‹°ë‚˜', 'ë¸Œë¼ì§ˆ');

    UPDATE tally.country
    SET time_difference = -14
    WHERE country_name IN ('ë¯¸í•©ì¤‘êµ­', 'ìºë‚˜ë‹¤');

    UPDATE tally.country
    SET time_difference = -15
    WHERE country_name IN ('ë©•ì‹œì½”', 'ì—˜ì‚´ë°”ë„ë¥´');

    -- ì£¼ìš” 30ê°œêµ­ ë‚ ì”¨ ì •ë³´ ì €ì¥

    UPDATE tally.country
    SET capital = 'wellington'
    WHERE country_name IN ('ë‰´ì§ˆëœë“œ');

    UPDATE tally.country
    SET capital = 'beijing'
    WHERE country_name IN ('ì¤‘êµ­');

    UPDATE tally.country
    SET capital = 'tokyo'
    WHERE country_name IN ('ì¼ë³¸');

    UPDATE tally.country
    SET capital = 'hanoi'
    WHERE country_name IN ('ë² íŠ¸ë‚¨');

    UPDATE tally.country
    SET capital = 'london'
    WHERE country_name IN ('ì˜êµ­');

    UPDATE tally.country
    SET capital = 'bern'
    WHERE country_name IN ('ìŠ¤ìœ„ìŠ¤');

    UPDATE tally.country
    SET capital = 'paris'
    WHERE country_name IN ('í”„ë‘ìŠ¤');

    UPDATE tally.country
    SET capital = 'ottawa'
    WHERE country_name IN ('ìºë‚˜ë‹¤');

    UPDATE tally.country
    SET capital = 'berlin'
    WHERE country_name IN ('ë…ì¼');

    UPDATE tally.country
    SET capital = 'roma'
    WHERE country_name IN ('ì´íƒˆë¦¬ì•„');

    UPDATE tally.country
    SET capital = 'macau'
    WHERE country_name IN ('ë§ˆì¹´ì˜¤');

    UPDATE tally.country
    SET capital = 'kuala lumpur'
    WHERE country_name IN ('ë§ë ˆì´ì‹œì•„');

    UPDATE tally.country
    SET capital = 'singapore'
    WHERE country_name IN ('ì‹±ê°€í¬ë¥´');

    UPDATE tally.country
    SET capital = 'hongkong'
    WHERE country_name IN ('í™ì½©');

    UPDATE tally.country
    SET capital = 'taipei'
    WHERE country_name IN ('ëŒ€ë§Œ');

    UPDATE tally.country
    SET capital = 'manila'
    WHERE country_name IN ('í•„ë¦¬í•€');

    UPDATE tally.country
    SET capital = 'bangkok'
    WHERE country_name IN ('íƒœêµ­');

    UPDATE tally.country
    SET capital = 'male'
    WHERE country_name IN ('ëª°ë””ë¸Œ');

    UPDATE tally.country
    SET capital = 'athens'
    WHERE country_name IN ('ê·¸ë¦¬ìŠ¤');

    UPDATE tally.country
    SET capital = 'moscow'
    WHERE country_name IN ('ëŸ¬ì‹œì•„');

    UPDATE tally.country
    SET capital = 'mexico city'
    WHERE country_name IN ('ë©•ì‹œì½”');

    UPDATE tally.country
    SET capital = 'budapest'
    WHERE country_name IN ('í—ê°€ë¦¬');

    UPDATE tally.country
    SET capital = 'warszawa'
    WHERE country_name IN ('í´ë€ë“œ');

    UPDATE tally.country
    SET capital = 'amsterdam'
    WHERE country_name IN ('ë„¤ëœë€ë“œ');

    UPDATE tally.country
    SET capital = 'madrid'
    WHERE country_name IN ('ìŠ¤í˜ì¸');

    UPDATE tally.country
    SET capital = 'brussels'
    WHERE country_name IN ('ë²¨ê¸°ì—');

    UPDATE tally.country
    SET capital = 'wien'
    WHERE country_name IN ('ì˜¤ìŠ¤íŠ¸ë¦¬ì•„');

    UPDATE tally.country
    SET capital = 'copenhagen'
    WHERE country_name IN ('ë´ë§ˆí¬');

    UPDATE tally.country
    SET capital = 'stockholm'
    WHERE country_name IN ('ìŠ¤ì›¨ë´');

    UPDATE tally.country
    SET capital = 'newyork'
    WHERE country_name IN ('ë¯¸í•©ì¤‘êµ­');

    -- ë¯¸í•©ì¤‘êµ­ì„ ë¯¸êµ­ìœ¼ë¡œ ë³€ê²½
    UPDATE tally.country
    SET country_name = 'ë¯¸êµ­'
    WHERE country_name IN ('ë¯¸í•©ì¤‘êµ­');

    -- ì˜ì–´ ì—†ëŠ” ê±° ì œê±°
    delete from country where capital is null;
    ```
